apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: glua-validating-webhook
webhooks:
- name: validate.glua.maurice.fr
  clientConfig:
    service:
      name: glua-webhook
      namespace: glua-webhook
      path: "/validate"
    caBundle: "" # Set this during installation
  rules:
  - operations: ["CREATE", "UPDATE"]
    apiGroups: ["*"]
    apiVersions: ["*"]
    resources: ["*"]
  admissionReviewVersions: ["v1"]
  sideEffects: None
  timeoutSeconds: 10
  failurePolicy: Ignore # Ignore failures as per requirements
  namespaceSelector:
    matchLabels:
      glua.maurice.fr/validation-enabled: "true"
